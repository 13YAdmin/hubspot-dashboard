name: 🔒 Security Scan (1h)

# Workflow dédié à la sécurité
# Tourne toutes les heures

on:
  schedule:
    # Toutes les heures
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  security:
    name: 🔒 Scanner Sécurité
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Scan sécurité
        run: |
          echo "🔒 SCAN SÉCURITÉ"
          echo "================================================"

          # Vérifier tokens hardcodés
          echo "🔍 Recherche tokens hardcodés..."
          if grep -r "token\|password\|secret" public/ --include="*.html" --include="*.js" | grep -v "placeholder"; then
            echo "⚠️  Tokens potentiels trouvés"
          else
            echo "✅ Pas de tokens hardcodés"
          fi

          # Vérifier XSS
          echo ""
          echo "🔍 Recherche vulnérabilités XSS..."
          if grep -r "innerHTML\|outerHTML" public/index.html; then
            echo "⚠️  Utilisation innerHTML détectée - vérifier sanitization"
          fi

          # Vérifier dépendances
          echo ""
          echo "🔍 Vérification dépendances..."
          echo "✅ Pas de dépendances npm (HTML pur)"

          echo ""
          echo "✅ Scan sécurité terminé"

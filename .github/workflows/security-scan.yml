name: ğŸ”’ Security Scan (1h)

# Workflow dÃ©diÃ© Ã  la sÃ©curitÃ©
# Tourne toutes les heures

on:
  schedule:
    # Toutes les heures
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  security:
    name: ğŸ”’ Scanner SÃ©curitÃ©
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Scan sÃ©curitÃ©
        run: |
          echo "ğŸ”’ SCAN SÃ‰CURITÃ‰"
          echo "================================================"

          # VÃ©rifier tokens hardcodÃ©s
          echo "ğŸ” Recherche tokens hardcodÃ©s..."
          if grep -r "token\|password\|secret" public/ --include="*.html" --include="*.js" | grep -v "placeholder"; then
            echo "âš ï¸  Tokens potentiels trouvÃ©s"
          else
            echo "âœ… Pas de tokens hardcodÃ©s"
          fi

          # VÃ©rifier XSS
          echo ""
          echo "ğŸ” Recherche vulnÃ©rabilitÃ©s XSS..."
          if grep -r "innerHTML\|outerHTML" public/index.html; then
            echo "âš ï¸  Utilisation innerHTML dÃ©tectÃ©e - vÃ©rifier sanitization"
          fi

          # VÃ©rifier dÃ©pendances
          echo ""
          echo "ğŸ” VÃ©rification dÃ©pendances..."
          echo "âœ… Pas de dÃ©pendances npm (HTML pur)"

          echo ""
          echo "âœ… Scan sÃ©curitÃ© terminÃ©"
